<!DOCTYPE html>
<html lang="<%=config.language%>">
<head>
  <meta charset="UTF-8">
  <title>Loading...</title>
  <% if (theme.stylesheets !== undefined && theme.stylesheets.length > 0) { %>
  <!-- stylesheets list from config.yml -->
  <% theme.stylesheets.forEach(function(url) { %>
    <link rel="stylesheet" href="<%=url%>">
  <% }); %>
  <% } %>
</head>
<body>
  <div :module="header" class="header"></div>
  <div :module></div>
  <div :module="footer"></div>
</body>
<% if (theme.scripts !== undefined && theme.scripts.length > 0) { %>
  <!-- scripts list from theme config.yml -->
  <% theme.scripts.forEach(function(url) { %>
    <script src="<%=url%>"></script>
  <% }); %>
<% } %>

<script>
  am.startRouter ( {
    history: am.HASH,
    baseURL: {
      module: "module__",
      component: "component__"
    },
    routes: function ( router ) {
      router.module ( "header" )
      .route ( ["/", "/:root"], "common/header" );

      router.module ()
      .route ( ["/", "/index"], "index" )
      .route ( "/doc", "doc", function ( childRouter ) {
        childRouter.redirect ("", "first-step");
        
        childRouter.module ( "menu" ).route ( ["", ":menu"], "common/menu" );

        childRouter.module ().route ( "first-step", "first-step/index" )
        .route ( "start-router", "start-router/index" )
        .route ( "module", "module/index" );
      } );

      router.module ( "footer" )
      .route ( ["/", "/:root"], "common/footer" );
    },

    plugin: [
      {
        name: "nav", 
        build: function () {
          return <%-JSON.stringify ( theme.menu ) %>;
        }
      },
      {
        name: "menu",
        build: function () {
          return {};
        }
      }
    ] 
  } );
</script>
</html>